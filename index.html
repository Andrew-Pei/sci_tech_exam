<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆä¸€ç§‘æŠ€æœŸæœ«è€ƒè¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 32px;
        }

        .student-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .student-info h2 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .timer {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            border: 2px solid #ffc107;
        }

        .timer h2 {
            color: #856404;
            font-size: 20px;
        }

        .timer #timer {
            font-size: 28px;
            font-weight: bold;
            color: #dc3545;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .question-section {
            margin-bottom: 40px;
        }

        .question-section h2 {
            color: #764ba2;
            margin-bottom: 20px;
            font-size: 22px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            transition: transform 0.3s;
        }

        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
            margin-right: 10px;
            font-size: 14px;
        }

        .options {
            margin-left: 40px;
        }

        .option {
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .option:hover {
            background: #e9ecef;
        }

        .option input[type="radio"] {
            margin-right: 10px;
        }

        .option input[type="radio"]:checked + span {
            color: #667eea;
            font-weight: bold;
        }

        .option.selected {
            border-color: #667eea;
            background: #e7f3ff;
        }

        .submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .result {
            display: none;
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            margin-top: 30px;
        }

        .result h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .score {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .result-details {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .result-details p {
            margin: 10px 0;
            font-size: 18px;
        }

        .correct-answers {
            color: #4ade80;
        }

        .wrong-answers {
            color: #f87171;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }

            .question h3 {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ åˆä¸€ç§‘æŠ€æœŸæœ«è€ƒè¯•</h1>
        
        <div class="student-info">
            <h2>ğŸ“ å­¦ç”Ÿä¿¡æ¯</h2>
            <div class="form-group">
                <label for="studentName">å§“åï¼š</label>
                <input type="text" id="studentName" placeholder="è¯·è¾“å…¥ä½ çš„å§“å" required>
            </div>
            <div class="form-group">
                <label for="studentClass">ç­çº§ï¼š</label>
                <input type="text" id="studentClass" placeholder="ä¾‹å¦‚ï¼šåˆä¸€ï¼ˆ3ï¼‰ç­" required>
            </div>
            <div class="form-group">
                <label for="studentNumber">å­¦å·ï¼š</label>
                <input type="text" id="studentNumber" placeholder="è¯·è¾“å…¥ä½ çš„å­¦å·" required>
            </div>
        </div>

        <div class="timer">
            <h2>â±ï¸ å‰©ä½™æ—¶é—´ï¼š<span id="timer">30:00</span></h2>
        </div>

        <form id="examForm">
            <div class="question-section">
                <h2>ä¸€ã€é€‰æ‹©é¢˜ï¼ˆæ¯é¢˜2åˆ†ï¼Œå…±60åˆ†ï¼‰</h2>
                <div id="choiceQuestions"></div>
            </div>

            <div class="question-section">
                <h2>äºŒã€åˆ¤æ–­é¢˜ï¼ˆæ¯é¢˜2åˆ†ï¼Œå…±40åˆ†ï¼‰</h2>
                <div id="judgeQuestions"></div>
            </div>

            <button type="submit" class="submit-btn">ğŸ“¤ æäº¤ç­”æ¡ˆ</button>
        </form>

        <div class="result" id="result">
            <h2>ğŸ‰ è€ƒè¯•å®Œæˆï¼</h2>
            <div class="score" id="finalScore">0</div>
            <div class="result-details">
                <p id="studentInfo"></p>
                <p class="correct-answers">âœ… æ­£ç¡®ï¼š<span id="correctCount">0</span> é¢˜</p>
                <p class="wrong-answers">âŒ é”™è¯¯ï¼š<span id="wrongCount">0</span> é¢˜</p>
                <p>âšª æœªç­”ï¼š<span id="unansweredCount">0</span> é¢˜</p>
                <p>ğŸ“Š æ€»åˆ†ï¼š<span id="totalScore">0</span>/100 åˆ†</p>
            </div>
        </div>
    </div>

    <script>
        // é€‰æ‹©é¢˜ï¼ˆ30é“ï¼‰
        const allChoiceQuestions = [
            {
                question: "ä¸‹åˆ—å“ªç§æŠ€æœ¯å±äºäººå·¥æ™ºèƒ½çš„åº”ç”¨ï¼Ÿ",
                options: ["A. 3Dæ‰“å°", "B. è¯­éŸ³è¯†åˆ«", "C. ä¼ ç»Ÿæœºæ¢°åˆ¶é€ ", "D. æ‰‹å·¥ç»˜å›¾"],
                answer: "B"
            },
            {
                question: "åœ¨ç¼–ç¨‹ä¸­ï¼Œå˜é‡ä¸»è¦ç”¨äºä»€ä¹ˆï¼Ÿ",
                options: ["A. å­˜å‚¨æ•°æ®", "B. æ˜¾ç¤ºå›¾ç‰‡", "C. æ’­æ”¾éŸ³ä¹", "D. è¿æ¥ç½‘ç»œ"],
                answer: "A"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªè®¾å¤‡ä¸å±äºè¾“å…¥è®¾å¤‡ï¼Ÿ",
                options: ["A. é”®ç›˜", "B. é¼ æ ‡", "C. æ‰“å°æœº", "D. æ‘„åƒå¤´"],
                answer: "C"
            },
            {
                question: "ä¸‹åˆ—å“ªç§ç¼–ç¨‹è¯­è¨€é€‚åˆåˆå­¦è€…å­¦ä¹ ï¼Ÿ",
                options: ["A. Python", "B. æ±‡ç¼–è¯­è¨€", "C. æœºå™¨è¯­è¨€", "D. äºŒè¿›åˆ¶ä»£ç "],
                answer: "A"
            },
            {
                question: "3Dæ‰“å°æŠ€æœ¯çš„åŸç†æ˜¯ï¼Ÿ",
                options: ["A. å‡æåˆ¶é€ ", "B. å¢æåˆ¶é€ ", "C. ç­‰æåˆ¶é€ ", "D. å˜æåˆ¶é€ "],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªä¸æ˜¯æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½ï¼Ÿ",
                options: ["A. ç®¡ç†ç¡¬ä»¶èµ„æº", "B. æä¾›ç”¨æˆ·ç•Œé¢", "C. åˆ¶ä½œæ¸¸æˆ", "D. ç®¡ç†æ–‡ä»¶"],
                answer: "C"
            },
            {
                question: "åœ¨Scratchç¼–ç¨‹ä¸­ï¼Œç§¯æœ¨å—çš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. è£…é¥°ç•Œé¢", "B. å®ç°ç¨‹åºé€»è¾‘", "C. æ˜¾ç¤ºèƒŒæ™¯", "D. æ’­æ”¾å£°éŸ³"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªç§æŠ€æœ¯å±äºè™šæ‹Ÿç°å®ï¼ˆVRï¼‰ï¼Ÿ",
                options: ["A. äºŒç»´åŠ¨ç”»", "B. ä¸‰ç»´å»ºæ¨¡", "C. æ²‰æµ¸å¼ä½“éªŒ", "D. å¹³é¢è®¾è®¡"],
                answer: "C"
            },
            {
                question: "ç½‘ç»œå®‰å…¨ä¸­ï¼Œå¯†ç çš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. è£…é¥°è´¦æˆ·", "B. ä¿æŠ¤è´¦æˆ·å®‰å…¨", "C. æ˜¾ç¤ºèº«ä»½", "D. è¿æ¥ç½‘ç»œ"],
                answer: "B"
            },
            {
                question: "è®¡ç®—æœºä¸­å­˜å‚¨æ•°æ®çš„æœ€å°å•ä½æ˜¯ï¼Ÿ",
                options: ["A. å­—èŠ‚", "B. ä½", "C. KB", "D. MB"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªä¸æ˜¯å¸¸è§çš„æ“ä½œç³»ç»Ÿï¼Ÿ",
                options: ["A. Windows", "B. Linux", "C. Python", "D. macOS"],
                answer: "C"
            },
            {
                question: "åœ¨Pythonä¸­ï¼Œç”¨äºè¾“å‡ºçš„å‡½æ•°æ˜¯ï¼Ÿ",
                options: ["A. input()", "B. print()", "C. output()", "D. display()"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªç§è®¾å¤‡å±äºå­˜å‚¨è®¾å¤‡ï¼Ÿ",
                options: ["A. æ˜¾ç¤ºå™¨", "B. é”®ç›˜", "C. ç¡¬ç›˜", "D. éŸ³ç®±"],
                answer: "C"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªæ˜¯æ­£ç¡®çš„IPåœ°å€æ ¼å¼ï¼Ÿ",
                options: ["A. 192.168.1", "B. 192.168.1.1", "C. 192.168.1.1.1", "D. 192.168.1.256"],
                answer: "B"
            },
            {
                question: "åœ¨ç¼–ç¨‹ä¸­ï¼Œå¾ªç¯ç»“æ„çš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. è·³è¿‡æŸäº›ä»£ç ", "B. é‡å¤æ‰§è¡Œä»£ç ", "C. é€‰æ‹©æ‰§è¡Œä»£ç ", "D. ç»“æŸç¨‹åº"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªä¸æ˜¯ç¼–ç¨‹è¯­è¨€çš„åˆ†ç±»ï¼Ÿ",
                options: ["A. æœºå™¨è¯­è¨€", "B. æ±‡ç¼–è¯­è¨€", "C. é«˜çº§è¯­è¨€", "D. æ–‡å­—è¯­è¨€"],
                answer: "D"
            },
            {
                question: "åœ¨Scratchä¸­ï¼Œäº‹ä»¶ç§¯æœ¨çš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. ç§»åŠ¨è§’è‰²", "B. å“åº”è§¦å‘äº‹ä»¶", "C. æ”¹å˜å¤–è§‚", "D. æ’­æ”¾å£°éŸ³"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªæ˜¯æ­£ç¡®çš„URLæ ¼å¼ï¼Ÿ",
                options: ["A. http://www.example.com", "B. www.example.com", "C. example.com", "D. http:example.com"],
                answer: "A"
            },
            {
                question: "è®¡ç®—æœºç—…æ¯’çš„ä¸»è¦ç‰¹å¾æ˜¯ï¼Ÿ",
                options: ["A. æé«˜ç³»ç»Ÿæ€§èƒ½", "B. è‡ªæˆ‘å¤åˆ¶å’Œä¼ æ’­", "C. ä¿æŠ¤æ•°æ®å®‰å…¨", "D. ä¿®å¤ç³»ç»Ÿæ¼æ´"],
                answer: "B"
            },
            {
                question: "åœ¨Pythonä¸­ï¼Œåˆ—è¡¨çš„æ•°æ®ç±»å‹æ˜¯ï¼Ÿ",
                options: ["A. str", "B. int", "C. list", "D. float"],
                answer: "C"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªä¸æ˜¯æœç´¢å¼•æ“ï¼Ÿ",
                options: ["A. ç™¾åº¦", "B. è°·æ­Œ", "C. Word", "D. å¿…åº”"],
                answer: "C"
            },
            {
                question: "åœ¨ç¼–ç¨‹ä¸­ï¼Œæ³¨é‡Šçš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. æ‰§è¡Œä»£ç ", "B. è§£é‡Šè¯´æ˜ä»£ç ", "C. ç”Ÿæˆéšæœºæ•°", "D. è¿æ¥æ•°æ®åº“"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªæ˜¯ç§»åŠ¨æ“ä½œç³»ç»Ÿï¼Ÿ",
                options: ["A. Windows", "B. Android", "C. Linux", "D. macOS"],
                answer: "B"
            },
            {
                question: "åœ¨Pythonä¸­ï¼Œç”¨äºè¾“å…¥çš„å‡½æ•°æ˜¯ï¼Ÿ",
                options: ["A. print()", "B. input()", "C. get()", "D. read()"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªæ˜¯å›¾åƒæ–‡ä»¶æ ¼å¼ï¼Ÿ",
                options: ["A. MP3", "B. JPG", "C. TXT", "D. EXE"],
                answer: "B"
            },
            {
                question: "å¢å¼ºç°å®ï¼ˆARï¼‰å’Œè™šæ‹Ÿç°å®ï¼ˆVRï¼‰çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Ÿ",
                options: ["A. å®Œå…¨ç›¸åŒ", "B. ARå åŠ ç°å®ï¼ŒVRå®Œå…¨è™šæ‹Ÿ", "C. VRå åŠ ç°å®ï¼ŒARå®Œå…¨è™šæ‹Ÿ", "D. æ²¡æœ‰åŒºåˆ«"],
                answer: "B"
            },
            {
                question: "åœ¨Scratchä¸­ï¼Œè¿åŠ¨ç§¯æœ¨çš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. æ’­æ”¾å£°éŸ³", "B. æ”¹å˜è§’è‰²ä½ç½®", "C. æ˜¾ç¤ºèƒŒæ™¯", "D. å“åº”äº‹ä»¶"],
                answer: "B"
            },
            {
                question: "ä¸‹åˆ—å“ªä¸ªæ˜¯æ­£ç¡®çš„ç”µå­é‚®ä»¶æ ¼å¼ï¼Ÿ",
                options: ["A. user@example", "B. user@example.com", "C. user@.com", "D. @example.com"],
                answer: "B"
            },
            {
                question: "è®¡ç®—æœºç¡¬ä»¶ä¸­ï¼ŒCPUçš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. å­˜å‚¨æ•°æ®", "B. å¤„ç†æ•°æ®", "C. æ˜¾ç¤ºå›¾åƒ", "D. è¾“å…¥æ•°æ®"],
                answer: "B"
            },
            {
                question: "åœ¨ç¼–ç¨‹ä¸­ï¼Œæ¡ä»¶è¯­å¥çš„ä½œç”¨æ˜¯ï¼Ÿ",
                options: ["A. é‡å¤æ‰§è¡Œ", "B. æ ¹æ®æ¡ä»¶é€‰æ‹©æ‰§è¡Œ", "C. è·³å‡ºå¾ªç¯", "D. ç»“æŸç¨‹åº"],
                answer: "B"
            }
        ];

        // åˆ¤æ–­é¢˜ï¼ˆ20é“ï¼‰
        const allJudgeQuestions = [
            {
                question: "è®¡ç®—æœºåªèƒ½æ‰§è¡Œäººç±»ç¼–å†™çš„ç¨‹åºã€‚",
                answer: true
            },
            {
                question: "ç®—æ³•å°±æ˜¯è§£å†³é—®é¢˜çš„æ­¥éª¤å’Œæ–¹æ³•ã€‚",
                answer: true
            },
            {
                question: "3Dæ‰“å°å¯ä»¥æ‰“å°ä»»ä½•ç‰©ä½“ã€‚",
                answer: false
            },
            {
                question: "Pythonæ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚",
                answer: true
            },
            {
                question: "äº’è”ç½‘å’Œä¸‡ç»´ç½‘æ˜¯åŒä¸€ä¸ªæ¦‚å¿µã€‚",
                answer: false
            },
            {
                question: "äººå·¥æ™ºèƒ½å¯ä»¥å®Œå…¨æ›¿ä»£äººç±»çš„æ‰€æœ‰å·¥ä½œã€‚",
                answer: false
            },
            {
                question: "ç¼–ç¨‹å°±æ˜¯è®©è®¡ç®—æœºæŒ‰ç…§æˆ‘ä»¬çš„æƒ³æ³•å·¥ä½œã€‚",
                answer: true
            },
            {
                question: "æ‰€æœ‰çš„è½¯ä»¶éƒ½éœ€è¦è”ç½‘æ‰èƒ½ä½¿ç”¨ã€‚",
                answer: false
            },
            {
                question: "æ•°æ®åœ¨è®¡ç®—æœºä¸­éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨çš„ã€‚",
                answer: true
            },
            {
                question: "æœºå™¨äººä¸€å®šé•¿å¾—åƒäººã€‚",
                answer: false
            },
            {
                question: "åœ¨Scratchä¸­ï¼Œæ¯ä¸ªè§’è‰²éƒ½æœ‰è‡ªå·±çš„åæ ‡ç³»ç»Ÿã€‚",
                answer: true
            },
            {
                question: "è®¡ç®—æœºå†…å­˜ä¸­çš„æ•°æ®æ–­ç”µåä¼šä¸¢å¤±ã€‚",
                answer: true
            },
            {
                question: "ç¡¬ç›˜å±äºå†…å­˜è®¾å¤‡ã€‚",
                answer: false
            },
            {
                question: "åœ¨Pythonä¸­ï¼Œå˜é‡åå¯ä»¥åŒ…å«ç©ºæ ¼ã€‚",
                answer: false
            },
            {
                question: "æ“ä½œç³»ç»Ÿæ˜¯è®¡ç®—æœºçš„æ ¸å¿ƒè½¯ä»¶ã€‚",
                answer: true
            },
            {
                question: "åœ¨Scratchä¸­ï¼Œå¯ä»¥åŒæ—¶æ’­æ”¾å¤šä¸ªå£°éŸ³ã€‚",
                answer: true
            },
            {
                question: "è®¡ç®—æœºç—…æ¯’åªèƒ½é€šè¿‡ç½‘ç»œä¼ æ’­ã€‚",
                answer: false
            },
            {
                question: "åœ¨ç¼–ç¨‹ä¸­ï¼Œç¼©è¿›å¯¹ç¨‹åºè¿è¡Œæ²¡æœ‰å½±å“ã€‚",
                answer: false
            },
            {
                question: "3Dæ‰“å°æœºå¯ä»¥æ‰“å°é£Ÿç‰©ã€‚",
                answer: true
            },
            {
                question: "åœ¨Scratchä¸­ï¼ŒèƒŒæ™¯ä¹Ÿå¯ä»¥ç¼–ç¨‹ã€‚",
                answer: true
            }
        ];

        // éšæœºæ’åºæ•°ç»„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // éšæœºæ‰“ä¹±é¢˜ç›®
        let choiceQuestions = shuffleArray(allChoiceQuestions);
        let judgeQuestions = shuffleArray(allJudgeQuestions);

        // è€ƒè¯•æ—¶é—´é™åˆ¶ï¼ˆ30åˆ†é’Ÿ = 1800ç§’ï¼‰
        const examTime = 1800;
        let timeRemaining = examTime;
        let timerInterval;

        // æ¸²æŸ“é€‰æ‹©é¢˜
        function renderChoiceQuestions() {
            const container = document.getElementById('choiceQuestions');
            choiceQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <h3><span class="question-number">${index + 1}</span>${q.question}</h3>
                    <div class="options">
                        ${q.options.map((opt, i) => `
                            <div class="option" onclick="selectOption(this, 'choice${index}')">
                                <input type="radio" name="choice${index}" value="${opt.charAt(0)}" id="choice${index}_${i}">
                                <span>${opt}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(questionDiv);
            });
        }

        // æ¸²æŸ“åˆ¤æ–­é¢˜
        function renderJudgeQuestions() {
            const container = document.getElementById('judgeQuestions');
            judgeQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <h3><span class="question-number">${index + 1}</span>${q.question}</h3>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'judge${index}')">
                            <input type="radio" name="judge${index}" value="true" id="judge${index}_true">
                            <span>âœ… æ­£ç¡®</span>
                        </div>
                        <div class="option" onclick="selectOption(this, 'judge${index}')">
                            <input type="radio" name="judge${index}" value="false" id="judge${index}_false">
                            <span>âŒ é”™è¯¯</span>
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });
        }

        // é€‰æ‹©é€‰é¡¹
        function selectOption(element, name) {
            const options = document.querySelectorAll(`input[name="${name}"]`);
            options.forEach(opt => {
                opt.parentElement.classList.remove('selected');
            });
            element.classList.add('selected');
            element.querySelector('input').checked = true;
        }

        // æ›´æ–°è®¡æ—¶å™¨
        function updateTimer() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (timeRemaining <= 0) {
                clearInterval(timerInterval);
                alert('è€ƒè¯•æ—¶é—´åˆ°ï¼ç³»ç»Ÿå°†è‡ªåŠ¨æäº¤ä½ çš„ç­”æ¡ˆã€‚');
                submitExam();
            } else {
                timeRemaining--;
            }
        }

        // æäº¤ç­”æ¡ˆ
        function submitExam() {
            // è·å–å­¦ç”Ÿä¿¡æ¯
            const name = document.getElementById('studentName').value;
            const className = document.getElementById('studentClass').value;
            const number = document.getElementById('studentNumber').value;

            if (!name || !className || !number) {
                alert('è¯·å¡«å†™å®Œæ•´çš„å­¦ç”Ÿä¿¡æ¯ï¼');
                return;
            }

            let choiceCorrectCount = 0;
            let choiceWrongCount = 0;
            let choiceUnansweredCount = 0;
            let judgeCorrectCount = 0;
            let judgeWrongCount = 0;
            let judgeUnansweredCount = 0;

            // æ£€æŸ¥é€‰æ‹©é¢˜
            choiceQuestions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="choice${index}"]:checked`);
                if (selected) {
                    if (selected.value === q.answer) {
                        choiceCorrectCount++;
                    } else {
                        choiceWrongCount++;
                    }
                } else {
                    choiceUnansweredCount++;
                }
            });

            // æ£€æŸ¥åˆ¤æ–­é¢˜
            judgeQuestions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="judge${index}"]:checked`);
                if (selected) {
                    if (selected.value === String(q.answer)) {
                        judgeCorrectCount++;
                    } else {
                        judgeWrongCount++;
                    }
                } else {
                    judgeUnansweredCount++;
                }
            });

            const correctCount = choiceCorrectCount + judgeCorrectCount;
            const wrongCount = choiceWrongCount + judgeWrongCount;
            const unansweredCount = choiceUnansweredCount + judgeUnansweredCount;

            // è®¡ç®—åˆ†æ•°ï¼ˆé€‰æ‹©é¢˜30é“ï¼Œæ¯é¢˜2åˆ†ï¼Œå…±60åˆ†ï¼›åˆ¤æ–­é¢˜20é“ï¼Œæ¯é¢˜2åˆ†ï¼Œå…±40åˆ†ï¼›æ€»åˆ†100åˆ†ï¼‰
            const choiceScore = choiceCorrectCount * 2;
            const judgeScore = judgeCorrectCount * 2;
            const totalScore = Math.round(choiceScore + judgeScore);

            // å‡†å¤‡æäº¤æ•°æ®
            const examData = {
                name: name,
                className: className,
                studentNumber: number,
                score: totalScore,
                choiceCorrectCount: choiceCorrectCount,
                choiceWrongCount: choiceWrongCount,
                choiceUnansweredCount: choiceUnansweredCount,
                judgeCorrectCount: judgeCorrectCount,
                judgeWrongCount: judgeWrongCount,
                judgeUnansweredCount: judgeUnansweredCount,
                correctCount: correctCount,
                wrongCount: wrongCount,
                unansweredCount: unansweredCount,
                submitTime: new Date().toISOString(),
                timeUsed: examTime - timeRemaining
            };

            // æäº¤åˆ°åç«¯
            fetch('/api/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(examData)
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(err => {
                        throw new Error(err.error || 'æäº¤å¤±è´¥');
                    });
                }
                return response.json();
            })
            .then(data => {
                console.log('æˆç»©æäº¤æˆåŠŸï¼š', data);
                if (data.submitCount && data.submitCount > 1) {
                    alert(`æˆç»©æ›´æ–°æˆåŠŸï¼è¿™æ˜¯ç¬¬ ${data.submitCount} æ¬¡æäº¤ï¼ˆæœ€å¤š3æ¬¡ï¼‰`);
                } else {
                    alert('æˆç»©æäº¤æˆåŠŸï¼');
                }
                displayResult(examData);
            })
            .catch(error => {
                console.error('æäº¤å¤±è´¥ï¼š', error);
                alert('æˆç»©æäº¤å¤±è´¥ï¼š' + error.message + '\nä½†ä½ çš„æˆç»©å·²è®¡ç®—å®Œæˆã€‚');
                displayResult(examData);
            });
        }

        // æ˜¾ç¤ºç»“æœ
        function displayResult(examData) {
            document.getElementById('studentInfo').innerHTML = `
                ğŸ‘¤ å§“åï¼š${examData.name}<br>
                ğŸ« ç­çº§ï¼š${examData.className}<br>
                ğŸ†” å­¦å·ï¼š${examData.studentNumber}
            `;
            document.getElementById('correctCount').textContent = examData.correctCount;
            document.getElementById('wrongCount').textContent = examData.wrongCount;
            document.getElementById('unansweredCount').textContent = examData.unansweredCount;
            document.getElementById('totalScore').textContent = examData.score;
            document.getElementById('finalScore').textContent = examData.score + 'åˆ†';

            document.getElementById('examForm').style.display = 'none';
            document.getElementById('result').style.display = 'block';
        }

        // è¡¨å•æäº¤äº‹ä»¶
        document.getElementById('examForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (confirm('ç¡®å®šè¦æäº¤ç­”æ¡ˆå—ï¼Ÿæäº¤åæ— æ³•ä¿®æ”¹ï¼')) {
                clearInterval(timerInterval);
                submitExam();
            }
        });

        // åˆå§‹åŒ–
        renderChoiceQuestions();
        renderJudgeQuestions();
        timerInterval = setInterval(updateTimer, 1000);
    </script>
</body>
</html>